<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="GIT对象模型SHA所有用来表示项目历史信息的文件,是通过一个40个字符的（40-digit）“对象名”来索引的，对象名看起来像这样:

6ff87c4664981e4397625791c8ea3bbb5f2279a3

在后边使用对象名时，只使用前面几个字符即可，但是最少需要4个。
你会在Git里">
    

    <!--Author-->
    
        <meta name="author" content="Liu Yanjie">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="GIT对象模型"/>
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="Liuyanjie&#39;s Blog"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    

    <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>GIT对象模型 - Liuyanjie&#39;s Blog</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Google Analytics -->
    


</head>


<body>

<div class="bg-gradient"></div>
<div class="bg-pattern"></div>

<!-- Menu -->
<!--Menu Links and Overlay-->
<div class="menu-bg">
    <div class="menu-container">
        <ul>
            
            <li class="menu-item">
                <a href="/">
                    Home
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/archives">
                    Archives
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/about.html">
                    About
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/tags">
                    Tags
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/categories">
                    Categories
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/contact.html">
                    Contact
                </a>
            </li>
            
        </ul>
    </div>
</div>

<!--Hamburger Icon-->
<nav>
    <a href="#menu"></a>
</nav>

<div class="container">

    <!-- Main Content -->
    <div class="row">
    <div class="col-sm-12">

        <!--Title and Logo-->
        <header>
    <div class="logo">
        <a href="/"><i class="logo-icon fa fa-cube" aria-hidden="true"></i></a>
        
    </div>
</header>

        <section class="main">
            
<div class="post">

    <div class="post-header">
        <h1 class="title">
            <a href="/posts/GIT对象模型/">
                GIT对象模型
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2018-05-07</span>
            
            
                <a href="#disqus_thread" class="comments">Comments</a>
            
            
                <span class="category">
                    <a href="/categories/GIT/">GIT</a>
                </span>
            
        </div>
    </div>

    <div class="content">

        <!-- Gallery -->
        

        <!-- Post Content -->
        <h2 id="GIT对象模型"><a href="#GIT对象模型" class="headerlink" title="GIT对象模型"></a>GIT对象模型</h2><h3 id="SHA"><a href="#SHA" class="headerlink" title="SHA"></a>SHA</h3><p>所有用来表示项目历史信息的文件,是通过一个40个字符的（40-digit）“对象名”来索引的，对象名看起来像这样:</p>
<blockquote>
<p>6ff87c4664981e4397625791c8ea3bbb5f2279a3</p>
</blockquote>
<p>在后边使用对象名时，只使用前面几个字符即可，但是最少需要4个。</p>
<p>你会在Git里到处看到这种“40个字符”字符串。每一个“对象名”都是对“对象”内容做SHA1哈希计算得来的，（SHA1是一种密码学的哈希算法）。这样就意味着两个不同内容的对象不可能有相同的“对象名”。</p>
<p>这样做会有几个好处：</p>
<p>Git只要比较对象名，就可以很快的判断两个对象是否相同。<br>因为在每个仓库（repository）的“对象名”的计算方法都完全一样，如果同样的内容存在两个不同的仓库中，就会存在相同的“对象名”下。<br>Git还可以通过检查对象内容的SHA1的哈希值和“对象名”是否相同，来判断对象内容是否正确。</p>
<h3 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h3><p>每个对象(object) 包括三个部分：类型，大小和内容。大小就是指内容的大小，内容取决于对象的类型，有四种类型的对象：”blob”、”tree”、 “commit” 和”tag”。</p>
<p>几乎所有的Git功能都是使用这四个简单的对象类型来完成的。它就像是在你本机的文件系统之上构建一个小的文件系统。</p>
<h4 id="blob-文件-对象"><a href="#blob-文件-对象" class="headerlink" title="blob (文件) 对象"></a>blob (文件) 对象</h4><p>“blob”用来存储文件数据，通常是一个文件。</p>
<p><img src="https://raw.githubusercontent.com/liuyanjie/knowledge/master/vcs/git/images/object-blob.png" alt="blob"></p>
<h4 id="tree-树-对象"><a href="#tree-树-对象" class="headerlink" title="tree (树) 对象"></a>tree (树) 对象</h4><p>“tree”有点像一个目录，它管理一些“tree”或是 “blob”（就像文件和子目录）</p>
<p><img src="https://raw.githubusercontent.com/liuyanjie/knowledge/master/vcs/git/images/object-tree.png" alt="tree"></p>
<h4 id="commit-提交-对象"><a href="#commit-提交-对象" class="headerlink" title="commit (提交) 对象"></a>commit (提交) 对象</h4><p>一个“commit”只指向一个”tree”，它用来标记项目某一个特定时间点的状态。它包括一些关于时间点的元数据，如时间戳、最近一次提交的作者、指向上次提交（commits）的指针等等。</p>
<p><img src="https://raw.githubusercontent.com/liuyanjie/knowledge/master/vcs/git/images/object-commit.png" alt="tree"></p>
<h4 id="tag-标签-对象"><a href="#tag-标签-对象" class="headerlink" title="tag (标签) 对象"></a>tag (标签) 对象</h4><p><img src="https://raw.githubusercontent.com/liuyanjie/knowledge/master/vcs/git/images/object-tag.png" alt="tag"></p>
<p>一个“tag”是来标记某一个提交(commit)的方法。</p>
<h4 id="commit-gt-tree-gt-blob"><a href="#commit-gt-tree-gt-blob" class="headerlink" title="commit -&gt; tree -&gt; blob"></a>commit -&gt; tree -&gt; blob</h4><p><img src="https://raw.githubusercontent.com/liuyanjie/knowledge/master/vcs/git/images/object-c-t-b.png" alt="object-c-t-b"></p>
<h3 id="与SVN的区别"><a href="#与SVN的区别" class="headerlink" title="与SVN的区别"></a>与SVN的区别</h3><p>Git与你熟悉的大部分版本控制系统的差别是很大的。</p>
<p>也许你熟悉Subversion、CVS、Perforce、Mercurial 等等，他们使用 “增量文件系统” （Delta Storage systems）, 就是说它们存储每次提交(commit)之间的差异。</p>
<p>Git正好与之相反，它会把你的每次提交的文件的全部内容（snapshot）都会记录下来。</p>
<p>这会是在使用Git时的一个很重要的理念。</p>
<h2 id="一步一步了解Git在做什么"><a href="#一步一步了解Git在做什么" class="headerlink" title="一步一步了解Git在做什么"></a>一步一步了解Git在做什么</h2><h3 id="初始化仓库"><a href="#初始化仓库" class="headerlink" title="初始化仓库"></a>初始化仓库</h3><p>初始化目录并创建一个Git仓库</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ mkdir git-obj-model</span><br><span class="line">➜  ~ <span class="built_in">cd</span> git-obj-model</span><br><span class="line">➜  git-obj-model git init</span><br><span class="line">Initialized empty Git repository <span class="keyword">in</span> /home/liuyanjie/git-obj-model/.git/</span><br></pre></td></tr></table></figure>
<p>看一下初始化的git仓库中到底有些什么内容。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(master) ls .git/*/*</span><br><span class="line">.git/hooks/applypatch-msg.sample  .git/hooks/post-update.sample     .git/hooks/pre-commit.sample          .git/hooks/pre-push.sample    .git/hooks/update.sample</span><br><span class="line">.git/hooks/commit-msg.sample      .git/hooks/pre-applypatch.sample  .git/hooks/prepare-commit-msg.sample  .git/hooks/pre-rebase.sample  .git/info/exclude</span><br><span class="line"></span><br><span class="line">.git/objects/info:</span><br><span class="line"></span><br><span class="line">.git/objects/pack:</span><br><span class="line"></span><br><span class="line">.git/refs/heads:</span><br><span class="line"></span><br><span class="line">.git/refs/tags:</span><br></pre></td></tr></table></figure>
<p>查看仓库状态</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(master) git status</span><br><span class="line">On branch master</span><br><span class="line"></span><br><span class="line">Initial commit</span><br><span class="line"></span><br><span class="line">nothing to commit (create/copy files and use <span class="string">"git add"</span> to track)</span><br></pre></td></tr></table></figure>
<p>后面忽略<code>.git/hooks/</code>下的文件。</p>
<h3 id="增加一个文件README-md"><a href="#增加一个文件README-md" class="headerlink" title="增加一个文件README.md"></a>增加一个文件README.md</h3><p>现在创建一个<code>README.md</code>，看下一<code>.git</code>目录，发现依然没有什么变化。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(master) <span class="built_in">echo</span> <span class="string">"# Readme"</span> &gt; README.md</span><br><span class="line">➜  git-obj-model git:(master) ✗ ls .git/*/*</span><br><span class="line">.git/objects/info:</span><br><span class="line"></span><br><span class="line">.git/objects/pack:</span><br><span class="line"></span><br><span class="line">.git/refs/heads:</span><br><span class="line"></span><br><span class="line">.git/refs/tags:</span><br></pre></td></tr></table></figure>
<p>查看当前状态</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">➜  git-test git:(master) ✗ git status</span><br><span class="line">On branch master</span><br><span class="line"></span><br><span class="line">Initial commit</span><br><span class="line"></span><br><span class="line">Untracked files:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to include <span class="keyword">in</span> what will be committed)</span><br><span class="line"></span><br><span class="line">  README.md</span><br><span class="line"></span><br><span class="line">nothing added to commit but untracked files present (use <span class="string">"git add"</span> to track)</span><br></pre></td></tr></table></figure>
<p>执行<code>git add</code>命令，继续观察，发现增加了<code>.git/objects/f3/954314c1026028e77ea3a765aadefa67b45195</code>文件。</p>
<p>通过猜测，应该知道，这应该是一个<code>blob</code>类型的文件，里面存储文件内容。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(master) ✗ git add README.md</span><br><span class="line">➜  git-obj-model git:(master) ✗ ls .git/*/*</span><br><span class="line">.git/objects/f3:</span><br><span class="line">954314c1026028e77ea3a765aadefa67b45195</span><br><span class="line"></span><br><span class="line">.git/objects/info:</span><br><span class="line"></span><br><span class="line">.git/objects/pack:</span><br><span class="line"></span><br><span class="line">.git/refs/heads:</span><br><span class="line"></span><br><span class="line">.git/refs/tags:</span><br></pre></td></tr></table></figure>
<p>查看当前状态</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">➜  git-test git:(master) ✗ git status</span><br><span class="line">On branch master</span><br><span class="line"></span><br><span class="line">Initial commit</span><br><span class="line"></span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">"git rm --cached &lt;file&gt;..."</span> to unstage)</span><br><span class="line"></span><br><span class="line">  new file:   README.md</span><br></pre></td></tr></table></figure>
<p>查看暂存区</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cat .git/index</span><br><span class="line"><span class="comment"># On branch master</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Initial commit</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Changes to be committed:</span></span><br><span class="line"><span class="comment">#   (use "git rm --cached &lt;file&gt;..." to unstage)</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#       new file:   README.md</span></span><br><span class="line"><span class="comment">#</span></span><br></pre></td></tr></table></figure>
<p>执行<code>git commit</code>命令，发现路径下又增加了两个文件：</p>
<ul>
<li>.git/objects/9d/978d59f2f22062c0382c859f4c3ef929026303</li>
<li>.git/objects/c1/067ba0a7ba51f937518c9bc051ea744ca748fe</li>
</ul>
<p>从上面的结构图，可以想到：</p>
<p>提交可定会产生一个提交对象，提交对象指向一个树对象，树对象包含上一步添加的<code>blob</code>对象。</p>
<p>下面将通过查看文件内容验证这一点。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(master) ✗ git commit -m <span class="string">'First commit!'</span> README.md</span><br><span class="line">[master (root-commit) 9d978d5] First commit!</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line"> create mode 100644 README.md</span><br><span class="line">➜  git-obj-model git:(master) ls .git/*/*</span><br><span class="line">.git/logs/refs:</span><br><span class="line">heads</span><br><span class="line"></span><br><span class="line">.git/objects/2f:</span><br><span class="line">99fbf7472b248f4301fbf6383979c92c474245</span><br><span class="line"></span><br><span class="line">.git/objects/c1:</span><br><span class="line">067ba0a7ba51f937518c9bc051ea744ca748fe</span><br><span class="line"></span><br><span class="line">.git/objects/f3:</span><br><span class="line">954314c1026028e77ea3a765aadefa67b45195</span><br><span class="line"></span><br><span class="line">.git/objects/info:</span><br><span class="line"></span><br><span class="line">.git/objects/pack:</span><br><span class="line"></span><br><span class="line">.git/refs/heads:</span><br><span class="line">master</span><br><span class="line"></span><br><span class="line">.git/refs/tags:</span><br></pre></td></tr></table></figure>
<p>通过<code>git cat-file</code>查看文件内容。</p>
<p>发现<code>9d978d5</code>是一个提交对象，里面包含提交相关的信息，并指向一个树对象。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(master) git cat-file commit 9d978d5</span><br><span class="line">tree c1067ba0a7ba51f937518c9bc051ea744ca748fe</span><br><span class="line">author liuyanjie &lt;lyj88888888888@gmail.com&gt; 1476109684 +0800</span><br><span class="line">committer liuyanjie &lt;lyj88888888888@gmail.com&gt; 1476109684 +0800</span><br><span class="line"></span><br><span class="line">First commit!</span><br></pre></td></tr></table></figure>
<p>再看<code>.git/refs/heads/master</code>文件内容，发现只有一行，写着提交对象的文件名。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(master) cat .git/refs/heads/master</span><br><span class="line">2f99fbf7472b248f4301fbf6383979c92c474245</span><br></pre></td></tr></table></figure>
<p>再看<code>c1067b</code>文件内容，是一个树对象，同样只有一行，记录刚添加的<code>README.md</code>的文件信息。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(master) git cat-file -p c1067b</span><br><span class="line">100644 blob f3954314c1026028e77ea3a765aadefa67b45195  README.md</span><br></pre></td></tr></table></figure>
<p>再看<code>f39543</code>文件内容，发现是<code>README.md</code>的文件内容。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(master) git cat-file -p f39543</span><br><span class="line"><span class="comment"># Readme</span></span><br><span class="line">➜  git-obj-model git:(master) ls</span><br><span class="line">README.md</span><br></pre></td></tr></table></figure>
<p>再看下一下.git目录中新增加的<code>.git/logs/refs/heads/master</code>，发现是刚刚提交的文件记录，包含两个提交对象作者及注释等。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(master) ✗ cat .git/logs/refs/heads/master</span><br><span class="line">0000000000000000000000000000000000000000 2f99fbf7472b248f4301fbf6383979c92c474245 liuyanjie &lt;lyj88888888888@gmail.com&gt; 1476109684 +0800	commit (initial): First commit!</span><br></pre></td></tr></table></figure>
<p>通过以上查看<code>.git</code>目录的变化过程，可以大致分析出Git是如何存储这些文件内容的。</p>
<p>上面只执行了<code>git add</code>和<code>git commit</code>两条操作。</p>
<h3 id="继续添加文件"><a href="#继续添加文件" class="headerlink" title="继续添加文件"></a>继续添加文件</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(master) <span class="built_in">echo</span> <span class="string">"# CHANGELOG"</span> &gt; CHANGELOG.md</span><br><span class="line">➜  git-obj-model git:(master) ✗ <span class="built_in">echo</span> <span class="string">"# CONTRIBUTING"</span> &gt; CONTRIBUTING.md</span><br><span class="line">➜  git-obj-model git:(master) ✗ git status</span><br><span class="line">On branch master</span><br><span class="line">Untracked files:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to include <span class="keyword">in</span> what will be committed)</span><br><span class="line"></span><br><span class="line">  CHANGELOG.md</span><br><span class="line">  CONTRIBUTING.md</span><br><span class="line"></span><br><span class="line">nothing added to commit but untracked files present (use <span class="string">"git add"</span> to track)</span><br><span class="line">➜  git-obj-model git:(master) ✗ ls</span><br><span class="line">CHANGELOG.md  CONTRIBUTING.md  README.md</span><br><span class="line">➜  git-obj-model git:(master) ✗ git add CHANGELOG.md CONTRIBUTING.md</span><br><span class="line">➜  git-obj-model git:(master) ✗ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</span><br><span class="line"></span><br><span class="line">  new file:   CHANGELOG.md</span><br><span class="line">  new file:   CONTRIBUTING.md</span><br></pre></td></tr></table></figure>
<p>可以看到又增加了，两个文件。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(master) ✗ ls .git/*/*</span><br><span class="line">.git/logs/refs:</span><br><span class="line">heads</span><br><span class="line"></span><br><span class="line">.git/objects/2f:</span><br><span class="line">99fbf7472b248f4301fbf6383979c92c474245</span><br><span class="line"></span><br><span class="line">.git/objects/a0:</span><br><span class="line">cf709bc0991b5340080f944d02894dc1596d46</span><br><span class="line"></span><br><span class="line">.git/objects/c1:</span><br><span class="line">067ba0a7ba51f937518c9bc051ea744ca748fe</span><br><span class="line"></span><br><span class="line">.git/objects/c6:</span><br><span class="line">b9e95b39b8cd8ead8bbf4b118104741017de1b</span><br><span class="line"></span><br><span class="line">.git/objects/f3:</span><br><span class="line">954314c1026028e77ea3a765aadefa67b45195</span><br><span class="line"></span><br><span class="line">.git/objects/info:</span><br><span class="line"></span><br><span class="line">.git/objects/pack:</span><br><span class="line"></span><br><span class="line">.git/refs/heads:</span><br><span class="line">master</span><br><span class="line"></span><br><span class="line">.git/refs/tags:</span><br></pre></td></tr></table></figure>
<p>分别查看一下各个文件的内容</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(master) ✗ git cat-file -p a0cf70</span><br><span class="line"><span class="comment"># CHANGELOG</span></span><br><span class="line">➜  git-obj-model git:(master) ✗ git cat-file -p c6b9e9</span><br><span class="line"><span class="comment"># CONTRIBUTING</span></span><br><span class="line">➜  git-obj-model git:(master) ✗ git cat-file -p f39543</span><br><span class="line"><span class="comment"># Readme</span></span><br></pre></td></tr></table></figure>
<p>再查看一下树对象的内容，然而并没有任何变化</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(master) ✗ git cat-file -p c1067b</span><br><span class="line">100644 blob f3954314c1026028e77ea3a765aadefa67b45195  README.md</span><br></pre></td></tr></table></figure>
<p>下面提交这两个文件，可以通过日志方便的查看信息。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(master) ✗ git commit --all -m <span class="string">"add CHANGELOG.md and CONTRIBUTING.md files"</span></span><br><span class="line">[master 4576ab4] add CHANGELOG.md and CONTRIBUTING.md files</span><br><span class="line"> 2 files changed, 2 insertions(+)</span><br><span class="line"> create mode 100644 CHANGELOG.md</span><br><span class="line"> create mode 100644 CONTRIBUTING.md</span><br></pre></td></tr></table></figure>
<p>同样再看一下<code>.git</code>目录下的内容</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(master) ls .git/*/*</span><br><span class="line">.git/logs/refs:</span><br><span class="line">heads</span><br><span class="line"></span><br><span class="line">.git/objects/2c:</span><br><span class="line">affd90cd736e58f516e3988e3af84f5fa42b4f</span><br><span class="line"></span><br><span class="line">.git/objects/9d:</span><br><span class="line">978d59f2f22062c0382c859f4c3ef929026303</span><br><span class="line"></span><br><span class="line">.git/objects/a0:</span><br><span class="line">cf709bc0991b5340080f944d02894dc1596d46</span><br><span class="line"></span><br><span class="line">.git/objects/b5:</span><br><span class="line">b1d930975db2ccee60faa0dfe9150edf5cbdde</span><br><span class="line"></span><br><span class="line">.git/objects/c1:</span><br><span class="line">067ba0a7ba51f937518c9bc051ea744ca748fe</span><br><span class="line"></span><br><span class="line">.git/objects/c6:</span><br><span class="line">b9e95b39b8cd8ead8bbf4b118104741017de1b</span><br><span class="line"></span><br><span class="line">.git/objects/f3:</span><br><span class="line">954314c1026028e77ea3a765aadefa67b45195</span><br><span class="line"></span><br><span class="line">.git/objects/info:</span><br><span class="line"></span><br><span class="line">.git/objects/pack:</span><br><span class="line"></span><br><span class="line">.git/refs/heads:</span><br><span class="line">master</span><br><span class="line"></span><br><span class="line">.git/refs/tags:</span><br></pre></td></tr></table></figure>
<p>查看一下master上的提交日志，刚刚提交内容在新的一行，与首次提交稍微有点差别，首次提交是commit (initial)。</p>
<p>还可以发现第二次提交的第一列和第一次提交的第二列一样，可以猜到，第一列指向上一次的提交对象。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(master) cat .git/logs/refs/heads/master</span><br><span class="line">0000000000000000000000000000000000000000 2f99fbf7472b248f4301fbf6383979c92c474245 liuyanjie &lt;lyj88888888888@gmail.com&gt; 1476109684 +0800	commit (initial): First commit!</span><br><span class="line">2f99fbf7472b248f4301fbf6383979c92c474245 4576ab487b26945323a4db41c601f912d6f50808 liuyanjie &lt;lyj88888888888@gmail.com&gt; 1476110257 +0800	commit: add CHANGELOG.md and CONTRIBUTING.md files</span><br></pre></td></tr></table></figure>
<p>查看log</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(master) git <span class="built_in">log</span></span><br><span class="line">commit 4576ab487b26945323a4db41c601f912d6f50808</span><br><span class="line">Author: liuyanjie &lt;lyj88888888888@gmail.com&gt;</span><br><span class="line">Date:   Mon Oct 10 22:37:37 2016 +0800</span><br><span class="line"></span><br><span class="line">    add CHANGELOG.md and CONTRIBUTING.md files</span><br><span class="line"></span><br><span class="line">commit 2f99fbf7472b248f4301fbf6383979c92c474245</span><br><span class="line">Author: liuyanjie &lt;lyj88888888888@gmail.com&gt;</span><br><span class="line">Date:   Mon Oct 10 22:28:04 2016 +0800</span><br><span class="line"></span><br><span class="line">    First commit!</span><br></pre></td></tr></table></figure>
<p>master也指向了新的提交对象，和提交日志一致。</p>
<p>第一次产生的提交对象同样存在于目录当中。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(master) cat .git/refs/heads/master</span><br><span class="line">4576ab487b26945323a4db41c601f912d6f50808</span><br></pre></td></tr></table></figure>
<p>看一下提交对象<code>4576ab</code>的内容，可以看到指向树对象<code>2caffd</code>。</p>
<p>此外，还发现一个parent，显然，这个指向上一次的提交对线，与提交日志保持一致，可以通过parent找到上一次提交。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(master) git cat-file -p 4576ab</span><br><span class="line">tree 2caffd90cd736e58f516e3988e3af84f5fa42b4f</span><br><span class="line">parent 2f99fbf7472b248f4301fbf6383979c92c474245</span><br><span class="line">author liuyanjie &lt;lyj88888888888@gmail.com&gt; 1476003224 -0700</span><br><span class="line">committer liuyanjie &lt;lyj88888888888@gmail.com&gt; 1476003224 -0700</span><br><span class="line"></span><br><span class="line">add CHANGELOG.md and CONTRIBUTING.md files</span><br></pre></td></tr></table></figure>
<p>在看树对象<code>2caffd</code>，发现相比之前，多了两行，分别指向新增加的文件。</p>
<p>但是，这个对象和上一个树对象并不是同一个树对象。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(master) git cat-file -p 2caffd</span><br><span class="line">100644 blob a0cf709bc0991b5340080f944d02894dc1596d46  CHANGELOG.md</span><br><span class="line">100644 blob c6b9e95b39b8cd8ead8bbf4b118104741017de1b  CONTRIBUTING.md</span><br><span class="line">100644 blob f3954314c1026028e77ea3a765aadefa67b45195  README.md</span><br></pre></td></tr></table></figure>
<p>到现在为止，整个目录下有3个文件，而.git目录下已经有多个文件，为了跟踪记录版本。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(master) ls</span><br><span class="line">CHANGELOG.md  CONTRIBUTING.md  README.md</span><br></pre></td></tr></table></figure>
<p>通过以上.git目录变化，可以发现（猜）：</p>
<p>commit对象指向一个根树，根树下面再指向文件和目录，类似Linux文件系统结构，和上面的图一致。</p>
<p>每次提交都会产出一commmit对象，这些commit通过parent，形成一个由高版本到低版本的链表，追溯这个链表，可以回到任意版本。</p>
<p>每一个commit都指向一个完整的树，由根树开始，可以遍历到某一般版本下的所有文件。</p>
<p>在每一颗树下，因为都是使用类似指针的结构，所以每次修改都是将变化的文件，重新创建一个blob文件，并修改相应指针。与SVN不同的是，SVN将每个文件都复制了一份。</p>
<p>与实际的目录相比，（看起来）不同的是文件名和文件内容是分开的，但是和Linux系统是类型的，inode这种方式。可以看出来作者安装文件系统的思路实现的。</p>
<p>目录中的<code>.git/refs/heads/master</code>指向某一次提交，当由另外一个分支的时候，会有<code>.git/refs/heads/branch-xxx</code>文件指向另外一次提交，而初始时与父分支指向相同。</p>
<h3 id="再添加一个带有目录文件"><a href="#再添加一个带有目录文件" class="headerlink" title="再添加一个带有目录文件"></a>再添加一个带有目录文件</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(master) mkdir lib</span><br><span class="line">➜  git-obj-model git:(master) <span class="built_in">echo</span> <span class="string">"// Author: liuyanjie"</span> &gt; ./lib/index.js</span><br><span class="line">➜  git-obj-model git:(master) ✗ git add lib/index.js</span><br><span class="line">➜  git-obj-model git:(master) ✗ git commit -m <span class="string">"add lib/index.js"</span> lib/index.js</span><br><span class="line">[master 1ad0e58] add lib/index.js</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line"> create mode 100644 lib/index.js</span><br></pre></td></tr></table></figure>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> ➜  git-obj-model git:(master) git cat-file -p 1ad0e58</span><br><span class="line">tree 9609811e44367d44f2915435f4454716e1e535fd</span><br><span class="line">parent 4576ab487b26945323a4db41c601f912d6f50808</span><br><span class="line">author liuyanjie &lt;lyj88888888888@gmail.com&gt; 1476003520 -0700</span><br><span class="line">committer liuyanjie &lt;lyj88888888888@gmail.com&gt; 1476003520 -0700</span><br><span class="line"></span><br><span class="line">add lib/index.js</span><br></pre></td></tr></table></figure>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(master) git cat-file -p 960981</span><br><span class="line">100644 blob a0cf709bc0991b5340080f944d02894dc1596d46  CHANGELOG.md</span><br><span class="line">100644 blob c6b9e95b39b8cd8ead8bbf4b118104741017de1b  CONTRIBUTING.md</span><br><span class="line">100644 blob f3954314c1026028e77ea3a765aadefa67b45195  README.md</span><br><span class="line">040000 tree 2fb9045bb558889ea2bd8cc5d8fe45e7247706da  lib</span><br></pre></td></tr></table></figure>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(master) git cat-file -p 2fb904</span><br><span class="line">100644 blob 39a204af28de9b4f0411735e597e0da7416ca35a  index.js</span><br></pre></td></tr></table></figure>
<p>上面连续几步和之前的效果一样，但是可以看到，在树对象<code>960981</code>中，包含了另一个树对象<code>2fb904</code>，这个对象的内容指向<code>index.js</code>文件。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(master) cat .git/logs/refs/heads/master</span><br><span class="line">0000000000000000000000000000000000000000 2f99fbf7472b248f4301fbf6383979c92c474245 liuyanjie &lt;lyj88888888888@gmail.com&gt; 1476109684 +0800	commit (initial): First commit!</span><br><span class="line">2f99fbf7472b248f4301fbf6383979c92c474245 4576ab487b26945323a4db41c601f912d6f50808 liuyanjie &lt;lyj88888888888@gmail.com&gt; 1476110257 +0800	commit: add CHANGELOG.md and CONTRIBUTING.md files</span><br><span class="line">4576ab487b26945323a4db41c601f912d6f50808 1ad0e58722bef17c2fb47f64e37d68e9990dd938 liuyanjie &lt;lyj88888888888@gmail.com&gt; 1476110760 +0800	commit: add lib/index.js</span><br></pre></td></tr></table></figure>
<p>log</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(master) git <span class="built_in">log</span></span><br><span class="line">commit 1ad0e58722bef17c2fb47f64e37d68e9990dd938</span><br><span class="line">Author: liuyanjie &lt;lyj88888888888@gmail.com&gt;</span><br><span class="line">Date:   Mon Oct 10 22:46:00 2016 +0800</span><br><span class="line"></span><br><span class="line">    add lib/index.js</span><br><span class="line"></span><br><span class="line">commit 4576ab487b26945323a4db41c601f912d6f50808</span><br><span class="line">Author: liuyanjie &lt;lyj88888888888@gmail.com&gt;</span><br><span class="line">Date:   Mon Oct 10 22:37:37 2016 +0800</span><br><span class="line"></span><br><span class="line">    add CHANGELOG.md and CONTRIBUTING.md files</span><br><span class="line"></span><br><span class="line">commit 2f99fbf7472b248f4301fbf6383979c92c474245</span><br><span class="line">Author: liuyanjie &lt;lyj88888888888@gmail.com&gt;</span><br><span class="line">Date:   Mon Oct 10 22:28:04 2016 +0800</span><br><span class="line"></span><br><span class="line">    First commit!</span><br></pre></td></tr></table></figure>
<h3 id="开始创建分支"><a href="#开始创建分支" class="headerlink" title="开始创建分支"></a>开始创建分支</h3><p>创建并切换到分支<code>feature-a</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(master) git branch</span><br><span class="line">* master</span><br><span class="line">➜  git-obj-model git:(master) git checkout -b feature<span class="_">-a</span></span><br><span class="line">Switched to a new branch <span class="string">'feature-a'</span></span><br><span class="line">➜  git-obj-model git:(feature<span class="_">-a</span>) git branch</span><br><span class="line">* feature<span class="_">-a</span></span><br><span class="line">  master</span><br><span class="line">➜  git-obj-model git:(feature<span class="_">-a</span>) ls</span><br><span class="line">CHANGELOG.md  CONTRIBUTING.md  lib  README.md</span><br></pre></td></tr></table></figure>
<p>看一下<code>.git</code>文件内容，可以看到<code>.git/refs/heads</code>目录下多了个<code>feature-a</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">.git/logs/refs:</span><br><span class="line">heads</span><br><span class="line"></span><br><span class="line">.git/objects/1a:</span><br><span class="line">d0e58722bef17c2fb47f64e37d68e9990dd938</span><br><span class="line"></span><br><span class="line">.git/objects/2c:</span><br><span class="line">affd90cd736e58f516e3988e3af84f5fa42b4f</span><br><span class="line"></span><br><span class="line">.git/objects/2f:</span><br><span class="line">99fbf7472b248f4301fbf6383979c92c474245  b9045bb558889ea2bd8cc5d8fe45e7247706da</span><br><span class="line"></span><br><span class="line">.git/objects/39:</span><br><span class="line">a204af28de9b4f0411735e597e0da7416ca35a</span><br><span class="line"></span><br><span class="line">.git/objects/45:</span><br><span class="line">76ab487b26945323a4db41c601f912d6f50808</span><br><span class="line"></span><br><span class="line">.git/objects/96:</span><br><span class="line">09811e44367d44f2915435f4454716e1e535fd</span><br><span class="line"></span><br><span class="line">.git/objects/a0:</span><br><span class="line">cf709bc0991b5340080f944d02894dc1596d46</span><br><span class="line"></span><br><span class="line">.git/objects/c1:</span><br><span class="line">067ba0a7ba51f937518c9bc051ea744ca748fe</span><br><span class="line"></span><br><span class="line">.git/objects/c6:</span><br><span class="line">b9e95b39b8cd8ead8bbf4b118104741017de1b</span><br><span class="line"></span><br><span class="line">.git/objects/f3:</span><br><span class="line">954314c1026028e77ea3a765aadefa67b45195</span><br><span class="line"></span><br><span class="line">.git/objects/info:</span><br><span class="line"></span><br><span class="line">.git/objects/pack:</span><br><span class="line"></span><br><span class="line">.git/refs/heads:</span><br><span class="line">feature<span class="_">-a</span>  master</span><br><span class="line"></span><br><span class="line">.git/refs/tags:</span><br></pre></td></tr></table></figure>
<p>查看一下<code>feature-a</code>的相关内容，指向的提交对象和<code>master</code>一样，并指明<code>Created from HEAD</code>。</p>
<p>从内容中可以看出，两个分支指向同一个提交对象<code>1ad0e5</code>，但是两个分支的日志不同。</p>
<p>日志记录了分之的历史，而提交对象记录了分支的数据内容和所有分支的历史。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(feature<span class="_">-a</span>) cat .git/logs/refs/heads/feature<span class="_">-a</span></span><br><span class="line">0000000000000000000000000000000000000000 1ad0e58722bef17c2fb47f64e37d68e9990dd938 liuyanjie &lt;lyj88888888888@gmail.com&gt; 1476111038 +0800	branch: Created from HEAD</span><br><span class="line">➜  git-obj-model git:(feature<span class="_">-a</span>) cat .git/logs/refs/heads/master</span><br><span class="line">0000000000000000000000000000000000000000 2f99fbf7472b248f4301fbf6383979c92c474245 liuyanjie &lt;lyj88888888888@gmail.com&gt; 1476109684 +0800	commit (initial): First commit!</span><br><span class="line">2f99fbf7472b248f4301fbf6383979c92c474245 4576ab487b26945323a4db41c601f912d6f50808 liuyanjie &lt;lyj88888888888@gmail.com&gt; 1476110257 +0800	commit: add CHANGELOG.md and CONTRIBUTING.md files</span><br><span class="line">4576ab487b26945323a4db41c601f912d6f50808 1ad0e58722bef17c2fb47f64e37d68e9990dd938 liuyanjie &lt;lyj88888888888@gmail.com&gt; 1476110760 +0800	commit: add lib/index.js</span><br><span class="line">➜  git-obj-model git:(feature<span class="_">-a</span>) cat .git/refs/heads/feature<span class="_">-a</span></span><br><span class="line">1ad0e58722bef17c2fb47f64e37d68e9990dd938</span><br><span class="line">➜  git-obj-model git:(feature<span class="_">-a</span>) cat .git/refs/heads/master</span><br><span class="line">1ad0e58722bef17c2fb47f64e37d68e9990dd938</span><br></pre></td></tr></table></figure>
<p>初始化<code>package.json</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(feature<span class="_">-a</span>) npm init</span><br><span class="line"><span class="comment"># This utility will walk you through creating a package.json file.</span></span><br><span class="line"><span class="comment"># It only covers the most common items, and tries to guess sensible defaults.</span></span><br><span class="line"><span class="comment"># See `npm help json` for definitive documentation on these fields</span></span><br><span class="line"><span class="comment"># and exactly what they do.</span></span><br><span class="line"><span class="comment"># Use `npm install &lt;pkg&gt; --save` afterwards to install a package and</span></span><br><span class="line"><span class="comment"># save it as a dependency in the package.json file.</span></span><br><span class="line"><span class="comment"># Press ^C at any time to quit.</span></span><br><span class="line"><span class="comment"># name: (git-obj-model)</span></span><br><span class="line"><span class="comment"># version: (1.0.0) 0.0.1</span></span><br><span class="line"><span class="comment"># description: git-obj-model</span></span><br><span class="line"><span class="comment"># entry point: (index.js)</span></span><br><span class="line"><span class="comment"># test command: test</span></span><br><span class="line"><span class="comment"># git repository:</span></span><br><span class="line"><span class="comment"># keywords: git object-model</span></span><br><span class="line"><span class="comment"># author: liuyanjie</span></span><br><span class="line"><span class="comment"># license: (ISC) MIT</span></span><br><span class="line"><span class="comment"># About to write to /home/liuyanjie/git-obj-model/package.json:</span></span><br><span class="line"><span class="comment"># &#123;</span></span><br><span class="line"><span class="comment">#   "name": "git-obj-model",</span></span><br><span class="line"><span class="comment">#   "version": "0.0.1",</span></span><br><span class="line"><span class="comment">#   "description": "git-obj-model",</span></span><br><span class="line"><span class="comment">#   "main": "index.js",</span></span><br><span class="line"><span class="comment">#   "scripts": &#123;</span></span><br><span class="line"><span class="comment">#     "test": "test"</span></span><br><span class="line"><span class="comment">#   &#125;,</span></span><br><span class="line"><span class="comment">#   "keywords": [</span></span><br><span class="line"><span class="comment">#     "git",</span></span><br><span class="line"><span class="comment">#     "object-model"</span></span><br><span class="line"><span class="comment">#   ],</span></span><br><span class="line"><span class="comment">#   "author": "liuyanjie",</span></span><br><span class="line"><span class="comment">#   "license": "MIT"</span></span><br><span class="line"><span class="comment"># &#125;</span></span><br><span class="line"><span class="comment"># Is this ok? (yes) yes</span></span><br></pre></td></tr></table></figure>
<p>安装<code>bluebird</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(feature<span class="_">-a</span>) ✗ ls</span><br><span class="line">CHANGELOG.md  CONTRIBUTING.md  lib  package.json  README.md</span><br><span class="line">➜  git-obj-model git:(feature<span class="_">-a</span>) ✗ npm install bluebird --save</span><br><span class="line">git-obj-model@0.0.1 /home/liuyanjie/workspace/git-obj-model</span><br><span class="line">└── bluebird@3.4.6</span><br></pre></td></tr></table></figure>
<p>添加文件到版本库，并查看变化。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(feature<span class="_">-a</span>) ✗ git add package.json</span><br><span class="line">➜  git-obj-model git:(feature<span class="_">-a</span>) ✗ cat .git/refs/heads/feature<span class="_">-a</span></span><br><span class="line">1ad0e58722bef17c2fb47f64e37d68e9990dd938</span><br><span class="line">➜  git-obj-model git:(feature<span class="_">-a</span>) ✗ cat .git/refs/heads/master</span><br><span class="line">1ad0e58722bef17c2fb47f64e37d68e9990dd938</span><br></pre></td></tr></table></figure>
<p>提交文件到版本库，并查看变化，提交指针已经指向新的提交对象，分支的版本超前于master，因为parent指向<code>1ad0e5</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(feature<span class="_">-a</span>) ✗ git commit package.json -m <span class="string">'add package.js'</span></span><br><span class="line">[feature<span class="_">-a</span> 0cb2147] add package.js</span><br><span class="line"> 1 file changed, 18 insertions(+)</span><br><span class="line"> create mode 100644 package.json</span><br><span class="line">➜  git-obj-model git:(feature<span class="_">-a</span>) ✗ cat .git/refs/heads/master</span><br><span class="line">1ad0e58722bef17c2fb47f64e37d68e9990dd938</span><br><span class="line">➜  git-obj-model git:(feature<span class="_">-a</span>) ✗ cat .git/refs/heads/feature<span class="_">-a</span></span><br><span class="line">0cb214741c044af3fb4677fe72e3ae175f3e0358</span><br><span class="line">➜  git-obj-model git:(feature<span class="_">-a</span>) ✗ git cat-file -p 0cb214</span><br><span class="line">tree f0cc543f39be5f635bea5bf8420d1cf5669999a9</span><br><span class="line">parent 1ad0e58722bef17c2fb47f64e37d68e9990dd938</span><br><span class="line">author liuyanjie &lt;lyj88888888888@gmail.com&gt; 1476111582 +0800</span><br><span class="line">committer liuyanjie &lt;lyj88888888888@gmail.com&gt; 1476111582 +0800</span><br><span class="line"></span><br><span class="line">add package.js</span><br></pre></td></tr></table></figure>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(feature<span class="_">-a</span>) ✗ git cat-file -p f0cc54</span><br><span class="line">100644 blob a0cf709bc0991b5340080f944d02894dc1596d46  CHANGELOG.md</span><br><span class="line">100644 blob c6b9e95b39b8cd8ead8bbf4b118104741017de1b  CONTRIBUTING.md</span><br><span class="line">100644 blob f3954314c1026028e77ea3a765aadefa67b45195  README.md</span><br><span class="line">040000 tree 2fb9045bb558889ea2bd8cc5d8fe45e7247706da  lib</span><br><span class="line">100644 blob 25ce01b36287fc8a43ac3eac6e526b4c1c6935d6  package.json</span><br></pre></td></tr></table></figure>
<p>合并分支<code>feature-a</code>到<code>master</code>分支，可以看到<code>master</code>分支跟上了<code>feature-a</code>，只改指针既可，非常快。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(feature<span class="_">-a</span>) git checkout master</span><br><span class="line">➜  git-obj-model git:(master) ✗ git merge feature<span class="_">-a</span></span><br><span class="line">Updating 1ad0e58..0cb2147</span><br><span class="line">Fast-forward</span><br><span class="line"> package.json | 18 ++++++++++++++++++</span><br><span class="line"> 1 file changed, 18 insertions(+)</span><br><span class="line"> create mode 100644 package.json</span><br><span class="line">➜  git-obj-model git:(master) ✗ cat .git/refs/heads/master</span><br><span class="line">0cb214741c044af3fb4677fe72e3ae175f3e0358</span><br><span class="line">➜  git-obj-model git:(master) ✗ cat .git/refs/heads/feature<span class="_">-a</span></span><br><span class="line">0cb214741c044af3fb4677fe72e3ae175f3e0358</span><br></pre></td></tr></table></figure>
<p>修改<code>master</code>分支</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 编辑文件并提交</span></span><br><span class="line">➜  git-obj-model git:(master) ✗ git checkout master</span><br><span class="line">Already on <span class="string">'master'</span></span><br><span class="line">➜  git-obj-model git:(feature<span class="_">-a</span>) git checkout master</span><br><span class="line">➜  git-obj-model git:(master) ✗ <span class="built_in">echo</span> -e <span class="string">"\n\n## About"</span> &gt;&gt; README.md</span><br><span class="line">➜  git-obj-model git:(master) ✗ cat README.md</span><br><span class="line"><span class="comment"># Readme</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## About</span></span><br><span class="line">➜  git-obj-model git:(master) ✗ git commit README.md -m <span class="string">"add About"</span></span><br><span class="line">[master ef6834c] add About</span><br><span class="line"> 1 file changed, 3 insertions(+)</span><br></pre></td></tr></table></figure>
<p>修改<code>feature-a</code>分支</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(master) ✗ git checkout feature<span class="_">-a</span></span><br><span class="line">Switched to branch <span class="string">'feature-a'</span></span><br><span class="line">➜  git-obj-model git:(feature<span class="_">-a</span>) ✗ git commit README.md -m <span class="string">"add About Me"</span></span><br><span class="line">[feature<span class="_">-a</span> da24911] add About Me</span><br><span class="line"> 1 file changed, 3 insertions(+)</span><br><span class="line">➜  git-obj-model git:(feature<span class="_">-a</span>) ✗ cat README.md</span><br><span class="line"><span class="comment"># Readme</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## About Me</span></span><br><span class="line"><span class="comment"># 编辑文件，使之产生冲突，然后提交</span></span><br><span class="line">➜  git-obj-model git:(feature<span class="_">-a</span>) git commit package.json -m <span class="string">'add keyword'</span></span><br></pre></td></tr></table></figure>
<p>查看分支头和历史记录，可以看到分支头指向不同的提交对象，而提交对象，又来源于同一个提交对象<code>0cb214741c044af3fb4677fe72e3ae175f3e0358</code>，两个分支之间存在交叉。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(feature<span class="_">-a</span>) ✗ cat .git/refs/heads/feature<span class="_">-a</span></span><br><span class="line">da2491150e0d66928e485ff1289abf6055069f54</span><br><span class="line">➜  git-obj-model git:(feature<span class="_">-a</span>) ✗ cat .git/refs/heads/master</span><br><span class="line">ef6834c89de31b3d553082392853da00f3d6b452</span><br><span class="line">➜  git-obj-model git:(feature<span class="_">-a</span>) ✗ cat .git/logs/refs/heads/master</span><br><span class="line">0000000000000000000000000000000000000000 2f99fbf7472b248f4301fbf6383979c92c474245 liuyanjie &lt;lyj88888888888@gmail.com&gt; 1476109684 +0800	commit (initial): First commit!</span><br><span class="line">2f99fbf7472b248f4301fbf6383979c92c474245 4576ab487b26945323a4db41c601f912d6f50808 liuyanjie &lt;lyj88888888888@gmail.com&gt; 1476110257 +0800	commit: add CHANGELOG.md and CONTRIBUTING.md files</span><br><span class="line">4576ab487b26945323a4db41c601f912d6f50808 1ad0e58722bef17c2fb47f64e37d68e9990dd938 liuyanjie &lt;lyj88888888888@gmail.com&gt; 1476110760 +0800	commit: add lib/index.js</span><br><span class="line">1ad0e58722bef17c2fb47f64e37d68e9990dd938 0cb214741c044af3fb4677fe72e3ae175f3e0358 liuyanjie &lt;lyj88888888888@gmail.com&gt; 1476111812 +0800	merge feature<span class="_">-a</span>: Fast-forward</span><br><span class="line">0cb214741c044af3fb4677fe72e3ae175f3e0358 ef6834c89de31b3d553082392853da00f3d6b452 liuyanjie &lt;lyj88888888888@gmail.com&gt; 1476112210 +0800	commit: add About</span><br><span class="line">➜  git-obj-model git:(feature<span class="_">-a</span>) ✗ cat .git/logs/refs/heads/feature<span class="_">-a</span></span><br><span class="line">0000000000000000000000000000000000000000 1ad0e58722bef17c2fb47f64e37d68e9990dd938 liuyanjie &lt;lyj88888888888@gmail.com&gt; 1476111038 +0800	branch: Created from HEAD</span><br><span class="line">1ad0e58722bef17c2fb47f64e37d68e9990dd938 0cb214741c044af3fb4677fe72e3ae175f3e0358 liuyanjie &lt;lyj88888888888@gmail.com&gt; 1476111582 +0800	commit: add package.js</span><br><span class="line">0cb214741c044af3fb4677fe72e3ae175f3e0358 da2491150e0d66928e485ff1289abf6055069f54 liuyanjie &lt;lyj88888888888@gmail.com&gt; 1476112277 +0800	commit: add About Me</span><br></pre></td></tr></table></figure>
<p>切换到<code>master</code>分支，再次合并<code>feature-a</code>到<code>master</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(feature<span class="_">-a</span>) ✗ git checkout master</span><br><span class="line">Switched to branch <span class="string">'master'</span></span><br><span class="line">➜  git-obj-model git:(master) ✗ git merge feature<span class="_">-a</span></span><br><span class="line">Auto-merging README.md</span><br><span class="line">CONFLICT (content): Merge conflict <span class="keyword">in</span> README.md</span><br><span class="line">Automatic merge failed; fix conflicts and <span class="keyword">then</span> commit the result.</span><br><span class="line">➜  git-obj-model git:(master) ✗ cat README.md</span><br><span class="line"><span class="comment"># Readme</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span><br><span class="line"><span class="comment">## About</span></span><br><span class="line">=======</span><br><span class="line"><span class="comment">## About Me</span></span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt; feature<span class="_">-a</span></span><br></pre></td></tr></table></figure>
<p>解决冲突之后的文件</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(master) ✗ cat README.md</span><br><span class="line"><span class="comment"># Readme</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## About</span></span><br><span class="line"></span><br><span class="line">➜  git-obj-model git:(master) ✗</span><br></pre></td></tr></table></figure>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(master) ✗ git commit README.md -m <span class="string">'fix conflict'</span></span><br><span class="line">fatal: cannot <span class="keyword">do</span> a partial commit during a merge.</span><br><span class="line">➜  git-obj-model git:(master) ✗ git commit -a</span><br><span class="line">[master 69d1d1d] Merge branch <span class="string">'feature-a'</span></span><br></pre></td></tr></table></figure>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(master) ✗ git status</span><br><span class="line">On branch master</span><br><span class="line">Untracked files:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to include <span class="keyword">in</span> what will be committed)</span><br><span class="line"></span><br><span class="line">  node_modules/</span><br><span class="line"></span><br><span class="line">nothing added to commit but untracked files present (use <span class="string">"git add"</span> to track)</span><br></pre></td></tr></table></figure>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(master) ✗ cat .git/refs/heads/feature<span class="_">-a</span></span><br><span class="line">fa521b1842700be40c3d7f4aef388435b86cdcb6</span><br><span class="line">➜  git-obj-model git:(master) ✗ cat .git/refs/heads/master</span><br><span class="line">34d8c2fc6b06a8aae7967a8f25f0a4cdd84876a8</span><br></pre></td></tr></table></figure>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(master) ✗ cat .git/logs/refs/heads/master</span><br><span class="line">0000000000000000000000000000000000000000 2f99fbf7472b248f4301fbf6383979c92c474245 liuyanjie &lt;lyj88888888888@gmail.com&gt; 1476109684 +0800	commit (initial): First commit!</span><br><span class="line">2f99fbf7472b248f4301fbf6383979c92c474245 4576ab487b26945323a4db41c601f912d6f50808 liuyanjie &lt;lyj88888888888@gmail.com&gt; 1476110257 +0800	commit: add CHANGELOG.md and CONTRIBUTING.md files</span><br><span class="line">4576ab487b26945323a4db41c601f912d6f50808 1ad0e58722bef17c2fb47f64e37d68e9990dd938 liuyanjie &lt;lyj88888888888@gmail.com&gt; 1476110760 +0800	commit: add lib/index.js</span><br><span class="line">1ad0e58722bef17c2fb47f64e37d68e9990dd938 0cb214741c044af3fb4677fe72e3ae175f3e0358 liuyanjie &lt;lyj88888888888@gmail.com&gt; 1476111812 +0800	merge feature<span class="_">-a</span>: Fast-forward</span><br><span class="line">0cb214741c044af3fb4677fe72e3ae175f3e0358 ef6834c89de31b3d553082392853da00f3d6b452 liuyanjie &lt;lyj88888888888@gmail.com&gt; 1476112210 +0800	commit: add About</span><br><span class="line">ef6834c89de31b3d553082392853da00f3d6b452 69d1d1d381ebbe27585079bf3deaf4ca13ba2fde liuyanjie &lt;lyj88888888888@gmail.com&gt; 1476112974 +0800	commit (merge): Merge branch <span class="string">'feature-a'</span></span><br></pre></td></tr></table></figure>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(master) ✗ git merge --<span class="built_in">stat</span> feature<span class="_">-a</span></span><br><span class="line">Already up-to-date.</span><br><span class="line">➜  git-obj-model git:(master) ✗ git branch -d feature<span class="_">-a</span></span><br><span class="line">Deleted branch feature<span class="_">-a</span> (was da24911).</span><br><span class="line">➜  git-obj-model git:(master) ✗ git cat-file -p da24911</span><br><span class="line">tree 33ab49e5d62dac2e273f2dc25a8d3d1c08164fd8</span><br><span class="line">parent 0cb214741c044af3fb4677fe72e3ae175f3e0358</span><br><span class="line">author liuyanjie &lt;lyj88888888888@gmail.com&gt; 1476112277 +0800</span><br><span class="line">committer liuyanjie &lt;lyj88888888888@gmail.com&gt; 1476112277 +0800</span><br><span class="line"></span><br><span class="line">add About Me</span><br><span class="line">➜  git-obj-model git:(master) ✗ git cat-file -p 69d1d1</span><br><span class="line">tree 75779b8d5612e7e92d21e24eb93c98a78bef9880</span><br><span class="line">parent ef6834c89de31b3d553082392853da00f3d6b452</span><br><span class="line">parent da2491150e0d66928e485ff1289abf6055069f54</span><br><span class="line">author liuyanjie &lt;lyj88888888888@gmail.com&gt; 1476112974 +0800</span><br><span class="line">committer liuyanjie &lt;lyj88888888888@gmail.com&gt; 1476112974 +0800</span><br><span class="line"></span><br><span class="line">Merge branch <span class="string">'feature-a'</span></span><br><span class="line">➜  git-obj-model git:(master) ✗ git branch</span><br><span class="line">* master</span><br></pre></td></tr></table></figure>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span> --graph --all --pretty=format:<span class="string">'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset'</span> --abbrev-commit --date=relative</span><br><span class="line">*   69d1d1d - (HEAD -&gt; master) Merge branch <span class="string">'feature-a'</span> (13 minutes ago) &lt;liuyanjie&gt;</span><br><span class="line">|\</span><br><span class="line">| * da24911 - add About Me (25 minutes ago) &lt;liuyanjie&gt;</span><br><span class="line">* | ef6834c - add About (26 minutes ago) &lt;liuyanjie&gt;</span><br><span class="line">|/</span><br><span class="line">* 0cb2147 - add package.js (36 minutes ago) &lt;liuyanjie&gt;</span><br><span class="line">* 1ad0e58 - add lib/index.js (50 minutes ago) &lt;liuyanjie&gt;</span><br><span class="line">* 4576ab4 - add CHANGELOG.md and CONTRIBUTING.md files (58 minutes ago) &lt;liuyanjie&gt;</span><br><span class="line">* 2f99fbf - First commit! (68 minutes ago) &lt;liuyanjie&gt;</span><br></pre></td></tr></table></figure>
<p>配置命令别名</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global alias.lg <span class="string">"log --graph --all --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset' --abbrev-commit --date=relative"</span></span><br><span class="line">git lg</span><br></pre></td></tr></table></figure>
<h3 id="打标签"><a href="#打标签" class="headerlink" title="打标签"></a>打标签</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">➜  git-obj-model git:(master) ✗ git tag</span><br><span class="line">➜  git-obj-model git:(master) ✗ git tag -a v0.0.1 -m <span class="string">"version 0.0.1"</span></span><br><span class="line">➜  git-obj-model git:(master) ✗ git tag</span><br><span class="line">v0.0.1</span><br><span class="line">➜  git-obj-model git:(master) ✗ cat .git/refs/tags/v0.0.1</span><br><span class="line">3cb5a0d0b86e5d80005d7df9acdfbd0e81e73680</span><br><span class="line">➜  git-obj-model git:(master) ✗ git cat-file -p 3cb5a0</span><br><span class="line">object 34d8c2fc6b06a8aae7967a8f25f0a4cdd84876a8</span><br><span class="line"><span class="built_in">type</span> commit</span><br><span class="line">tag v0.0.1</span><br><span class="line">tagger ubuntu-16.04-64 &lt;liuyanjie&gt; 1476157130 -0700</span><br><span class="line"></span><br><span class="line">version 0.0.1</span><br><span class="line">➜  git-obj-model git:(master) ✗ cat .git/logs/refs/heads/master</span><br><span class="line">0000000000000000000000000000000000000000 9d978d59f2f22062c0382c859f4c3ef929026303 ubuntu-16.04-64 &lt;liuyanjie&gt; 1476002050 -0700  commit (initial): First commit!</span><br><span class="line">9d978d59f2f22062c0382c859f4c3ef929026303 b5b1d930975db2ccee60faa0dfe9150edf5cbdde ubuntu-16.04-64 &lt;liuyanjie&gt; 1476003224 -0700  commit: add CHANGELOG.md and CONTRIBUTING.md files</span><br><span class="line">b5b1d930975db2ccee60faa0dfe9150edf5cbdde 3bf6d4e4f4f8d7f8892b2a33623a65511f34d35a ubuntu-16.04-64 &lt;liuyanjie&gt; 1476003520 -0700  commit: add lib/index.js</span><br><span class="line">3bf6d4e4f4f8d7f8892b2a33623a65511f34d35a 67e9ab4ffbdde212fdf3f640674c742028585c10 ubuntu-16.04-64 &lt;liuyanjie&gt; 1476006305 -0700  merge feature<span class="_">-a</span>: Fast-forward</span><br><span class="line">67e9ab4ffbdde212fdf3f640674c742028585c10 496e60e1943637c66adf87b13e09b04920d97b98 ubuntu-16.04-64 &lt;liuyanjie&gt; 1476006843 -0700  commit: add keyword</span><br><span class="line">496e60e1943637c66adf87b13e09b04920d97b98 34d8c2fc6b06a8aae7967a8f25f0a4cdd84876a8 ubuntu-16.04-64 &lt;liuyanjie&gt; 1476009515 -0700  commit (merge): Merge branch <span class="string">'feature-a'</span></span><br><span class="line">➜  git-obj-model git:(master) ✗ git cat-file -p 34d8c2</span><br><span class="line">tree 950ba459cbd53d9741165b849f6dcb2d799c8841</span><br><span class="line">parent 496e60e1943637c66adf87b13e09b04920d97b98</span><br><span class="line">parent fa521b1842700be40c3d7f4aef388435b86cdcb6</span><br><span class="line">author ubuntu-16.04-64 &lt;liuyanjie&gt; 1476009515 -0700</span><br><span class="line">committer ubuntu-16.04-64 &lt;liuyanjie&gt; 1476009515 -0700</span><br><span class="line"></span><br><span class="line">Merge branch <span class="string">'feature-a'</span></span><br></pre></td></tr></table></figure>
<p><a href="images/git-obj-model.svg">svg版</a></p>
<p><img src="https://raw.githubusercontent.com/liuyanjie/knowledge/master/vcs/git/images/git-obj-model.png" alt="git-obj-model"></p>

    </div>

    

    
        <div class="post-tags">
            <i class="fa fa-tags" aria-hidden="true"></i>
            <a href="/tags/GIT对象模型/">#GIT对象模型</a>
        </div>
    

    <!-- Comments -->
    
    <div class="comments">
        
<div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>



    </div>
    

</div>
        </section>

    </div>
</div>


</div>

<!-- Footer -->
<div class="push"></div>

<footer class="footer-content">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 footer-about">
                <h2>About</h2>
                <p>
                    This theme was developed by <a href="https://github.com/klugjo">Jonathan Klughertz</a>. The source code is available on Github. Create Websites. Make Magic.
                </p>
            </div>
            
    <div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 recent-posts">
        <h2>Recent Posts</h2>
        <ul>
            
            <li>
                <a class="footer-post" href="/posts/GIT对象模型/">GIT对象模型</a>
            </li>
            
            <li>
                <a class="footer-post" href="/posts/Git命令/">Git命令</a>
            </li>
            
            <li>
                <a class="footer-post" href="/posts/JavaScript深度/">JavaScript深度</a>
            </li>
            
            <li>
                <a class="footer-post" href="/posts/JavaScript基础/">JavaScript基础</a>
            </li>
            
        </ul>
    </div>



            
<div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 footer-categories">
    <h2>Categories</h2>
    <ul>
        
        <li>
            <a class="footer-post" href="/categories/GIT/">GIT</a>
        </li>
        
        <li>
            <a class="footer-post" href="/categories/Syntax/">Syntax</a>
        </li>
        
        <li>
            <a class="footer-post" href="/categories/GIT/VCS/">VCS</a>
        </li>
        
        <li>
            <a class="footer-post" href="/categories/Syntax/JavaScript/">JavaScript</a>
        </li>
        
    </ul>
</div>

        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <ul class="list-inline footer-social-icons">
                    
                    <li class="list-inline-item">
                        <a href="https://github.com/liuyanjie">
                            <span class="footer-icon-container">
                                <i class="fa fa-github"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <li class="list-inline-item">
                        <a href="mailto:liuyj619@gmail.com">
                            <span class="footer-icon-container">
                                <i class="fa fa-envelope-o"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="\#">
                            <span class="footer-icon-container">
                                <i class="fa fa-rss"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="footer-copyright">
                    @Untitled. All right reserved | Design & Hexo <a href="http://www.codeblocq.com/">Jonathan Klughertz</a>
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- After footer scripts -->

<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Tween Max -->
<script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.5/TweenMax.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Custom JavaScript -->
<script src="/js/main.js"></script>

<!-- Disqus Comments -->

<script type="text/javascript">
    var disqus_shortname = 'liuyanjie';

    (function(){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



</body>

</html>